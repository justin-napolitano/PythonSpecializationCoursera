import PIL
from PIL import Image
from PIL import ImageDraw as imd
from PIL import ImageFont as imf

# read image and convert to RGB
image=Image.open("readonly/msi_recruitment.gif")
image=image.convert('RGB')

# setting variables
R, G, B = 0, 1, 2
channels = [R, G, B] # setting channels
steps = [0.1, 0.5, 0.9] # setting intensities
fnt = imf.truetype('readonly/fanwood-webfont.ttf', 50) # setting text font

# generating the list of 9 images with text
adjusted = []
for ch in channels :
    for step in steps :
        txt = 'channel {} intensity {}'.format(ch, step) # generating text
        place = PIL.Image.new(image.mode, (image.width, int(image.height*1.1))) # generating the black background
        imd.Draw(place).text((2,image.height), txt, font = fnt) # adding text to the background
        place.paste(image, (0, 0)) # pasting image onto the background, then adjusting the color on following lines
        source = place.split()
        out = source[ch].point(lambda i: i * step)
        source[ch].paste(out)
        img = Image.merge(place.mode, source)
        adjusted.append(img)

# creating the contact sheet from different channels and intensities
contact_sheet=PIL.Image.new(img.mode, (img.width*3,img.height*3))
x=0
y=0

for img in adjusted:
    contact_sheet.paste(img, (x, y) )
    if x+img.width == contact_sheet.width:
        x=0
        y=y+img.height
    else:
        x=x+img.width

# resize and display the contact sheet
contact_sheet = contact_sheet.resize((int(contact_sheet.width/2),int(contact_sheet.height/2) ))
display(contact_sheet)
